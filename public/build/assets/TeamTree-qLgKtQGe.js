import{b,r as j,j as e,L as h,H as y}from"./app-BHnpG12W.js";import{A as N}from"./AuthenticatedLayout-agL2eqlU.js";const n={diamond:"#34d399",gold:"#fbbf24",silver:"#94a3b8",default:"#d1d5db"},o={diamond:{frame:"border-emerald-400 bg-emerald-100 ring-emerald-200",badge:"bg-emerald-200 text-emerald-900",icon:"bg-emerald-200 text-emerald-800",stroke:n.diamond},gold:{frame:"border-amber-400 bg-amber-100 ring-amber-200",badge:"bg-amber-200 text-amber-900",icon:"bg-amber-200 text-amber-800",stroke:n.gold},silver:{frame:"border-slate-400 bg-slate-100 ring-slate-200",badge:"bg-slate-200 text-slate-800",icon:"bg-slate-200 text-slate-700",stroke:n.silver},default:{frame:"border-gray-200 bg-white ring-gray-200",badge:"bg-gray-100 text-gray-600",icon:"bg-gray-100 text-gray-600",stroke:n.default}},v=({color:t=n.default,h:s=16})=>e.jsx("svg",{width:"8",height:s,className:"block",children:e.jsx("line",{x1:"4",y1:"0",x2:"4",y2:s,stroke:t,strokeWidth:"3",strokeLinecap:"round"})}),u=({color:t=n.default,w:s=80})=>e.jsx("svg",{width:s,height:"8",className:"block",children:e.jsx("line",{x1:"0",y1:"4",x2:s,y2:"4",stroke:t,strokeWidth:"3",strokeLinecap:"round"})});function w({title:t,id:s,pkg:r,open:a,onToggle:i,href:d}){const l=o[r]||o.default;return e.jsxs("div",{className:"relative w-[112px]",children:[e.jsxs("button",{type:"button",onClick:i,className:`mx-auto rounded-2xl border ${l.frame} shadow-sm w-[112px] h-[64px] flex items-center justify-center hover:shadow-md transition active:scale-[0.99] ring-1`,title:a?"Collapse":"Expand",children:[e.jsx("div",{className:"absolute left-1.5 top-1.5 text-[11px] text-gray-500 select-none",children:a?"â–¾":"â–¸"}),e.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center ${l.icon}`,children:e.jsx("span",{className:"text-sm",children:"ðŸ‘¤"})}),e.jsx("div",{className:`absolute top-1 right-1 text-[9px] px-2 py-[2px] rounded-full capitalize whitespace-nowrap max-w-[84px] truncate text-center ${l.badge}`,title:r||"no-pack",children:r??"No-Pack"})]}),e.jsxs("div",{className:"w-full text-center leading-tight mt-1",children:[e.jsx("div",{className:"text-[10px] text-gray-800 truncate px-1",title:t,children:t}),e.jsxs("div",{className:"text-[9px] text-gray-400",children:["#",s]})]}),d&&e.jsx(h,{href:d,className:"absolute -right-1 -bottom-1 text-[10px] rounded-md bg-gray-100 px-1.5 py-[2px] text-gray-600 hover:bg-gray-200",title:"Open subtree page",children:"â†—"})]})}function p({node:t}){const{props:s}=b(),r=s?.type||"placement",[a,i]=j.useState(!1);if(!t)return null;const d=t.name||t.code||`#${t.id}`,l=t.id,f=x=>{try{return route("team.tree",{root:x,type:r})}catch{return`/team/tree/${x}?type=${r}`}},g=a&&(t.children?.L||t.children?.R),m=o[t.package]||o.default;return e.jsxs("div",{className:"inline-flex flex-col items-center",children:[e.jsx(w,{title:d,id:l,pkg:t.package,open:a,onToggle:()=>i(x=>!x),href:f(l)}),g&&e.jsx(v,{color:m.stroke,h:14}),g&&e.jsxs("div",{className:"flex items-start gap-7",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(u,{color:m.stroke,w:72}),t.children?.L?e.jsx(p,{node:t.children.L}):e.jsx("div",{className:"rounded-2xl border border-purple-200 bg-white shadow-sm w-[112px] h-[64px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-[11px] text-purple-600",children:[e.jsx("div",{className:"text-lg leading-none",children:"ðŸ‘¥âž•"}),"Add"]})})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(u,{color:m.stroke,w:72}),t.children?.R?e.jsx(p,{node:t.children.R}):e.jsx("div",{className:"rounded-2xl border border-purple-200 bg-white shadow-sm w-[112px] h-[64px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-[11px] text-purple-600",children:[e.jsx("div",{className:"text-lg leading-none",children:"ðŸ‘¥âž•"}),"Add"]})})]})]})]})}const c=({children:t,tone:s="slate"})=>{const r={slate:"bg-slate-100 text-slate-700",yellow:"bg-amber-100 text-amber-800",purple:"bg-emerald-100 text-emerald-800",emerald:"bg-sky-100 text-sky-800"};return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs ${r[s]}`,children:t})},k=({seedId:t,currentType:s})=>{const r=a=>{try{return route("team.tree",{root:t,type:a})}catch{return`/team/tree/${t}?type=${a}`}};return e.jsxs("div",{className:"inline-flex rounded-2xl border bg-white p-1 shadow-sm",children:[e.jsx(h,{href:r("placement"),className:`px-3 py-1.5 rounded-xl text-sm transition ${s==="placement"?"bg-gray-900 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Placement"}),e.jsx(h,{href:r("referral"),className:`px-3 py-1.5 rounded-xl text-sm transition ${s==="referral"?"bg-gray-900 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Referral"})]})};function $({root:t=null,counts:s={},seed:r,type:a="placement"}){const{auth:i}=b().props??{};return e.jsxs(N,{user:i?.user,header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Team Tree"}),r&&e.jsxs("div",{className:"text-[11px] text-gray-600",children:["Viewing ",e.jsx("span",{className:"font-medium",children:r.name}),e.jsxs("span",{className:"mx-1",children:["(# ",r.id,")"]})," â€¢ ",r.code]})]}),r&&e.jsx(k,{seedId:r.id,currentType:a})]}),children:[e.jsx(y,{title:"Team Tree"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"mx-auto max-w-[1400px] px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-2 text-sm text-gray-700",children:[e.jsxs("div",{className:"mr-2",children:["Total Team: ",e.jsx("span",{className:"font-medium",children:s?.total_nodes??0}),e.jsx("span",{className:"mx-2",children:"Â·"}),"Left: ",e.jsx("span",{className:"font-medium",children:s?.left_nodes??0}),e.jsx("span",{className:"mx-2",children:"Â·"}),"Right: ",e.jsx("span",{className:"font-medium",children:s?.right_nodes??0})]}),e.jsxs(c,{tone:"slate",children:["Silver: ",s?.pkg?.silver??0]}),e.jsxs(c,{tone:"yellow",children:["Gold: ",s?.pkg?.gold??0]}),e.jsxs(c,{tone:"purple",children:["Diamond: ",s?.pkg?.diamond??0]}),e.jsxs(c,{tone:"emerald",children:["View: ",a==="placement"?"Placement":"Referral"]})]}),t?e.jsx("div",{className:"overflow-x-auto overflow-y-hidden rounded-3xl border bg-white p-5 sm:p-6 shadow-sm ring-1 ring-gray-100",children:e.jsx("div",{className:"min-w-[820px] flex justify-center",children:e.jsx(p,{node:t})})}):e.jsx("div",{className:"rounded-xl border bg-white p-8 text-center text-gray-500",children:"No team found."})]})})]})}export{$ as default};
