import{b as f,R as h,j as s,L as u}from"./app-CK5W6Rwp.js";import{A as b}from"./AuthenticatedLayout-fwSN-iAm.js";function w(){const{asOf:p,filters:i,totals:x,matrix:n,recent:m}=f().props,o=["silver","gold","diamond","other"],t=e=>Number(e||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),[r,j]=h.useState(i?.from||""),[c,N]=h.useState(i?.to||""),y=()=>{const e=new URLSearchParams;r&&e.set("from",r),c&&e.set("to",c);const a=e.toString();return a?`/income/binary?${a}`:"/income/binary"},l=o.reduce((e,a)=>{const d=n?.[a]||{};return e.oL+=d.orders_left||0,e.oR+=d.orders_right||0,e.aL+=d.left||0,e.aR+=d.right||0,e.m+=d.matched||0,e.cfL+=d.cf_left||0,e.cfR+=d.cf_right||0,e},{oL:0,oR:0,aL:0,aR:0,m:0,cfL:0,cfR:0});return s.jsx(b,{children:s.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-semibold",children:"Binary Business"}),s.jsxs("div",{className:"text-sm text-gray-500",children:["As of: ",p]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow p-4",children:s.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"From"}),s.jsx("input",{type:"date",value:r,onChange:e=>j(e.target.value),className:"border rounded px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"To"}),s.jsx("input",{type:"date",value:c,onChange:e=>N(e.target.value),className:"border rounded px-3 py-2"})]}),s.jsx("a",{href:y(),className:"inline-flex items-center px-4 py-2 rounded bg-black text-white hover:opacity-90",children:"Apply"}),s.jsx(u,{href:"/income/binary",className:"inline-flex items-center px-4 py-2 rounded border hover:bg-gray-50",children:"Reset"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow p-5",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Left Business"}),s.jsx("div",{className:"mt-1 text-2xl font-bold",children:t(x?.left)})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow p-5",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Right Business"}),s.jsx("div",{className:"mt-1 text-2xl font-bold",children:t(x?.right)})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow overflow-hidden",children:[s.jsx("div",{className:"px-5 py-4 border-b",children:s.jsx("h2",{className:"font-semibold",children:"Rank-wise Summary"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-50 text-left",children:[s.jsx("th",{className:"px-5 py-3",children:"Rank"}),s.jsx("th",{className:"px-5 py-3",children:"Left (Orders • Amount)"}),s.jsx("th",{className:"px-5 py-3",children:"Right (Orders • Amount)"}),s.jsx("th",{className:"px-5 py-3",children:"Matched (Amount)"}),s.jsx("th",{className:"px-5 py-3",children:"Carry Fwd L"}),s.jsx("th",{className:"px-5 py-3",children:"Carry Fwd R"})]})}),s.jsx("tbody",{children:o.map(e=>{const a=n?.[e]||{};return s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"px-5 py-3 capitalize",children:e}),s.jsxs("td",{className:"px-5 py-3",children:[s.jsxs("div",{className:"text-gray-500 text-xs",children:["Orders: ",a.orders_left||0]}),s.jsxs("div",{className:"font-medium",children:["₹",t(a.left)]})]}),s.jsxs("td",{className:"px-5 py-3",children:[s.jsxs("div",{className:"text-gray-500 text-xs",children:["Orders: ",a.orders_right||0]}),s.jsxs("div",{className:"font-medium",children:["₹",t(a.right)]})]}),s.jsxs("td",{className:"px-5 py-3 font-medium",children:["₹",t(a.matched)]}),s.jsxs("td",{className:"px-5 py-3",children:["₹",t(a.cf_left)]}),s.jsxs("td",{className:"px-5 py-3",children:["₹",t(a.cf_right)]})]},e)})}),s.jsx("tfoot",{children:s.jsxs("tr",{className:"border-t bg-gray-50",children:[s.jsx("td",{className:"px-5 py-3 font-semibold",children:"Grand Total"}),s.jsxs("td",{className:"px-5 py-3 font-semibold",children:[s.jsxs("div",{className:"text-gray-500 text-xs",children:["Orders: ",l.oL]}),s.jsxs("div",{children:["₹",t(l.aL)]})]}),s.jsxs("td",{className:"px-5 py-3 font-semibold",children:[s.jsxs("div",{className:"text-gray-500 text-xs",children:["Orders: ",l.oR]}),s.jsxs("div",{children:["₹",t(l.aR)]})]}),s.jsxs("td",{className:"px-5 py-3 font-semibold",children:["₹",t(l.m)]}),s.jsxs("td",{className:"px-5 py-3 font-semibold",children:["₹",t(l.cfL)]}),s.jsxs("td",{className:"px-5 py-3 font-semibold",children:["₹",t(l.cfR)]})]})})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow overflow-hidden",children:[s.jsx("div",{className:"px-5 py-4 border-b",children:s.jsx("h2",{className:"font-semibold",children:"Recent Paid Orders (Last 20)"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-50 text-left",children:[s.jsx("th",{className:"px-5 py-3",children:"Date"}),s.jsx("th",{className:"px-5 py-3",children:"Buyer"}),s.jsx("th",{className:"px-5 py-3",children:"Product"}),s.jsx("th",{className:"px-5 py-3",children:"Rank"}),s.jsx("th",{className:"px-5 py-3",children:"Leg"}),s.jsx("th",{className:"px-5 py-3",children:"Amount"})]})}),s.jsxs("tbody",{children:[(m||[]).map((e,a)=>s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"px-5 py-3",children:e.created_at}),s.jsxs("td",{className:"px-5 py-3",children:["#",e.buyer_id]}),s.jsx("td",{className:"px-5 py-3",children:e.product}),s.jsx("td",{className:"px-5 py-3 capitalize",children:e.type}),s.jsx("td",{className:"px-5 py-3",children:e.leg}),s.jsxs("td",{className:"px-5 py-3",children:["₹",t(e.amount)]})]},a)),!m?.length&&s.jsx("tr",{children:s.jsx("td",{className:"px-5 py-6 text-center text-gray-500",colSpan:6,children:"No data found."})})]})]})})]})]})})}export{w as default};
