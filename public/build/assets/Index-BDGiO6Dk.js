import{r as m,u as v,j as e,H as w,a as u}from"./app-DY0TNshk.js";import{A as C}from"./AuthenticatedLayout-L6BZQBhv.js";function k({a:t,onEdit:a,onDefault:r,onDelete:i}){return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-3 py-2",children:t.id}),e.jsxs("td",{className:"px-3 py-2",children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsx("div",{className:"text-xs text-gray-500",children:t.phone})]}),e.jsxs("td",{className:"px-3 py-2",children:[e.jsx("div",{children:t.line1}),t.line2&&e.jsx("div",{children:t.line2}),e.jsxs("div",{className:"text-gray-600 text-sm",children:[t.city,", ",t.state," ",t.pincode]}),e.jsx("div",{className:"text-gray-500 text-xs",children:t.country})]}),e.jsx("td",{className:"px-3 py-2",children:t.is_default?e.jsx("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2 py-0.5 text-xs font-semibold text-green-700",children:"Default"}):e.jsx("button",{onClick:()=>r(t),className:"text-indigo-600 text-sm hover:underline",children:"Make default"})}),e.jsxs("td",{className:"px-3 py-2 text-right",children:[e.jsx("button",{onClick:()=>a(t),className:"text-blue-600 text-sm hover:underline mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>i(t),className:"text-red-600 text-sm hover:underline",children:"Delete"})]})]})}function D({addresses:t=[],countries:a=[]}){const[r,i]=m.useState(null),{data:d,setData:n,post:h,put:p,processing:x,reset:o,errors:l}=v({id:null,name:"",phone:"",line1:"",line2:"",city:"",state:"",pincode:"",country:a[0]||"India",is_default:!1}),j=()=>{o(),n("country",a[0]||"India"),i("create")},g=s=>{n({id:s.id,name:s.name??"",phone:s.phone??"",line1:s.line1??"",line2:s.line2??"",city:s.city??"",state:s.state??"",pincode:s.pincode??"",country:s.country??"India",is_default:!!s.is_default}),i("edit")},c=()=>{o(),i(null)},N=s=>{s.preventDefault(),r==="edit"&&d.id?p(route("address.update",d.id),{preserveScroll:!0,onSuccess:c}):h(route("address.store"),{preserveScroll:!0,onSuccess:c})},b=s=>{u.post(route("address.default",s.id),{},{preserveScroll:!0})},f=s=>{confirm("Delete this address?")&&u.delete(route("address.delete",s.id),{preserveScroll:!0})},y=m.useMemo(()=>e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"My Addresses"}),e.jsx("button",{onClick:j,className:"rounded-lg bg-indigo-600 text-white px-4 py-2 text-sm font-semibold hover:bg-indigo-500",children:"+ Add New Address"})]}),[]);return e.jsxs(C,{header:y,children:[e.jsx(w,{title:"Addresses"}),e.jsxs("div",{className:"max-w-5xl mx-auto p-4 space-y-6",children:[r&&e.jsxs("div",{className:"bg-white rounded-xl shadow p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold",children:r==="edit"?"Edit Address":"Add Address"}),e.jsx("button",{onClick:c,className:"text-gray-600 hover:underline text-sm",children:"Close"})]}),e.jsxs("form",{onSubmit:N,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Name"}),e.jsx("input",{className:"mt-1 w-full rounded-lg border-gray-300",value:d.name,onChange:s=>n("name",s.target.value),required:!0}),l.name&&e.jsx("p",{className:"text-red-600 text-xs",children:l.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Phone"}),e.jsx("input",{className:"mt-1 w-full rounded-lg border-gray-300",value:d.phone,onChange:s=>n("phone",s.target.value),required:!0}),l.phone&&e.jsx("p",{className:"text-red-600 text-xs",children:l.phone})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Address Line 1"}),e.jsx("input",{className:"mt-1 w-full rounded-lg border-gray-300",value:d.line1,onChange:s=>n("line1",s.target.value),required:!0}),l.line1&&e.jsx("p",{className:"text-red-600 text-xs",children:l.line1})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Address Line 2 (optional)"}),e.jsx("input",{className:"mt-1 w-full rounded-lg border-gray-300",value:d.line2,onChange:s=>n("line2",s.target.value)}),l.line2&&e.jsx("p",{className:"text-red-600 text-xs",children:l.line2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"City"}),e.jsx("input",{className:"mt-1 w-full rounded-lg border-gray-300",value:d.city,onChange:s=>n("city",s.target.value),required:!0}),l.city&&e.jsx("p",{className:"text-red-600 text-xs",children:l.city})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"State"}),e.jsx("input",{className:"mt-1 w-full rounded-lg border-gray-300",value:d.state,onChange:s=>n("state",s.target.value),required:!0}),l.state&&e.jsx("p",{className:"text-red-600 text-xs",children:l.state})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Pincode"}),e.jsx("input",{className:"mt-1 w-full rounded-lg border-gray-300",value:d.pincode,onChange:s=>n("pincode",s.target.value),required:!0}),l.pincode&&e.jsx("p",{className:"text-red-600 text-xs",children:l.pincode})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Country"}),e.jsx("select",{className:"mt-1 w-full rounded-lg border-gray-300",value:d.country,onChange:s=>n("country",s.target.value),children:(a?.length?a:["India"]).map(s=>e.jsx("option",{value:s,children:s},s))}),l.country&&e.jsx("p",{className:"text-red-600 text-xs",children:l.country})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:d.is_default,onChange:s=>n("is_default",s.target.checked)}),e.jsx("span",{className:"text-sm",children:"Set as default"})]})}),e.jsx("div",{className:"md:col-span-2 pt-2",children:e.jsx("button",{type:"submit",disabled:x,className:"rounded-lg bg-indigo-600 text-white px-4 py-2 text-sm font-semibold disabled:opacity-50",children:x?"Saving...":r==="edit"?"Update Address":"Add Address"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-5",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Saved Addresses"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left bg-gray-50",children:[e.jsx("th",{className:"px-3 py-2",children:"#"}),e.jsx("th",{className:"px-3 py-2",children:"Contact"}),e.jsx("th",{className:"px-3 py-2",children:"Address"}),e.jsx("th",{className:"px-3 py-2",children:"Default"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),e.jsx("tbody",{children:t?.length?t.map(s=>e.jsx(k,{a:s,onEdit:g,onDefault:b,onDelete:f},s.id)):e.jsx("tr",{children:e.jsx("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:"5",children:"No addresses yet."})})})]})})]})]})]})}export{D as default};
