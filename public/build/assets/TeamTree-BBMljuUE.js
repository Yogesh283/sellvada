import{b,r as j,j as e,L as h,H as w}from"./app-DPbuxPhU.js";import{A as y}from"./AuthenticatedLayout-D4VO3Py3.js";const m={diamond:{frame:"bg-emerald-500 border-emerald-600 text-white",badge:"bg-emerald-600 text-white",icon:"bg-emerald-400 text-white",stroke:"#34d399"},gold:{frame:"bg-amber-400 border-amber-500 text-white",badge:"bg-amber-500 text-white",icon:"bg-amber-300 text-white",stroke:"#fbbf24"},silver:{frame:"bg-gray-400 border-gray-500 text-white",badge:"bg-gray-500 text-white",icon:"bg-gray-300 text-white",stroke:"#94a3b8"},default:{frame:"bg-white border-gray-300 text-gray-700",badge:"bg-gray-100 text-gray-600",icon:"bg-gray-200 text-gray-600",stroke:"#d1d5db"}},N=({color:t="#d1d5db",h:s=16})=>e.jsx("svg",{width:"8",height:s,className:"block",children:e.jsx("line",{x1:"4",y1:"0",x2:"4",y2:s,stroke:t,strokeWidth:"3",strokeLinecap:"round"})}),u=({color:t="#d1d5db",w:s=60})=>e.jsx("svg",{width:s,height:"8",className:"block",children:e.jsx("line",{x1:"0",y1:"4",x2:s,y2:"4",stroke:t,strokeWidth:"3",strokeLinecap:"round"})});function v({title:t,id:s,pkg:r,open:a,onToggle:l,href:n,isRoot:x}){const i=m[r]||m.default;return e.jsxs("div",{className:"relative w-[100px] sm:w-[112px]",children:[e.jsxs("button",{type:"button",onClick:x?void 0:l,className:`mx-auto rounded-xl sm:rounded-2xl border ${i.frame} shadow-md w-[100px] sm:w-[112px] h-[56px] sm:h-[64px] flex items-center justify-center transition active:scale-[0.99] ring-1`,title:a?"Collapse":"Expand",children:[!x&&e.jsx("div",{className:"absolute left-1 top-1 text-[10px] text-white/80",children:a?"â–¾":"â–¸"}),e.jsx("div",{className:`w-6 h-6 sm:w-7 sm:h-7 rounded-full flex items-center justify-center ${i.icon}`,children:e.jsx("span",{className:"text-xs sm:text-sm",children:"ðŸ‘¤"})}),e.jsx("div",{className:`absolute top-1 right-1 text-[8px] px-1.5 rounded-full capitalize truncate max-w-[70px] ${i.badge}`,children:r??"No-Pack"})]}),e.jsxs("div",{className:"w-full text-center mt-1",children:[e.jsx("div",{className:"text-[9px] truncate",children:t}),e.jsxs("div",{className:"text-[8px] text-gray-500",children:["#",s]})]}),n&&e.jsx(h,{href:n,className:"absolute -right-1 -bottom-1 text-[9px] bg-white/70 px-1 rounded hover:bg-white",children:"â†—"})]})}function p({node:t,isRoot:s=!1}){const{props:r}=b(),a=r?.type||"placement",[l,n]=j.useState(s);if(!t)return null;const x=t.name||t.code||`#${t.id}`,i=d=>{try{return route("team.tree",{root:d,type:a})}catch{return`/team/tree/${d}?type=${a}`}},g=l&&(t.children?.L||t.children?.R),o=m[t.package]||m.default,f=s?"flex flex-col items-center mx-auto":"inline-flex flex-col items-center";return e.jsxs("div",{className:f,children:[e.jsx(v,{title:x,id:t.id,pkg:t.package,open:l,onToggle:()=>n(d=>!d),href:i(t.id),isRoot:s}),g&&e.jsx(N,{color:o.stroke,h:14}),g&&e.jsxs("div",{className:"flex items-start gap-4 sm:gap-7",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(u,{color:o.stroke}),t.children?.L?e.jsx(p,{node:t.children.L}):e.jsx("div",{className:"rounded-xl border border-purple-300 bg-purple-50 w-[100px] h-[56px] flex items-center justify-center",children:e.jsx("div",{className:"text-[10px] text-purple-600",children:"ðŸ‘¥âž•"})})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(u,{color:o.stroke}),t.children?.R?e.jsx(p,{node:t.children.R}):e.jsx("div",{className:"rounded-xl border border-purple-300 bg-purple-50 w-[100px] h-[56px] flex items-center justify-center",children:e.jsx("div",{className:"text-[10px] text-purple-600",children:"ðŸ‘¥âž•"})})]})]})]})}const c=({children:t,tone:s="slate"})=>{const r={slate:"bg-slate-100 text-slate-700",yellow:"bg-amber-100 text-amber-800",purple:"bg-emerald-100 text-emerald-800",emerald:"bg-sky-100 text-sky-800"};return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs ${r[s]}`,children:t})},k=({seedId:t,currentType:s})=>{const r=a=>{try{return route("team.tree",{root:t,type:a})}catch{return`/team/tree/${t}?type=${a}`}};return e.jsxs("div",{className:"inline-flex rounded-2xl border bg-white p-1 shadow-sm",children:[e.jsx(h,{href:r("placement"),className:`px-3 py-1.5 rounded-xl text-sm transition ${s==="placement"?"bg-gray-900 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Placement"}),e.jsx(h,{href:r("referral"),className:`px-3 py-1.5 rounded-xl text-sm transition ${s==="referral"?"bg-gray-900 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Referral"})]})};function L({root:t=null,counts:s={},seed:r,type:a="placement"}){const{auth:l}=b().props??{};return e.jsxs(y,{user:l?.user,header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Team Tree"}),r&&e.jsxs("div",{className:"text-[11px] text-gray-600",children:["Viewing ",e.jsx("span",{className:"font-medium",children:r.name}),e.jsxs("span",{className:"mx-1",children:["(# ",r.id,")"]})," â€¢ ",r.code]})]}),r&&e.jsx(k,{seedId:r.id,currentType:a})]}),children:[e.jsx(w,{title:"Team Tree"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"mx-auto max-w-[1400px] px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-2 text-sm text-gray-700",children:[e.jsxs("div",{className:"mr-2",children:["Total Team: ",e.jsx("span",{className:"font-medium",children:s?.total_nodes??0}),e.jsx("span",{className:"mx-2",children:"Â·"}),"Left: ",e.jsx("span",{className:"font-medium",children:s?.left_nodes??0}),e.jsx("span",{className:"mx-2",children:"Â·"}),"Right: ",e.jsx("span",{className:"font-medium",children:s?.right_nodes??0})]}),e.jsxs(c,{tone:"slate",children:["Silver: ",s?.pkg?.silver??0]}),e.jsxs(c,{tone:"yellow",children:["Gold: ",s?.pkg?.gold??0]}),e.jsxs(c,{tone:"purple",children:["Diamond: ",s?.pkg?.diamond??0]}),e.jsxs(c,{tone:"emerald",children:["View: ",a==="placement"?"Placement":"Referral"]})]}),t?e.jsx("div",{className:"overflow-x-auto overflow-y-hidden rounded-3xl border bg-white p-5 sm:p-6 shadow-sm ring-1 ring-gray-100",children:e.jsx("div",{className:"min-w-full grid place-items-center",children:e.jsx("div",{className:"w-fit mx-auto sm:min-w-[820px]",children:e.jsx(p,{node:t,isRoot:!0})})})}):e.jsx("div",{className:"rounded-xl border bg-white p-8 text-center text-gray-500",children:"No team found."})]})})]})}export{L as default};
