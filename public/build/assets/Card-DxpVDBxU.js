import{r as c,j as e,H as P,a as A}from"./app-BBe8GiaN.js";import{A as T}from"./AuthenticatedLayout-Cc8s13_T.js";import"./transition-qALeenLW.js";const n=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(t),k="cart",R=()=>{try{const t=localStorage.getItem(k);return t?JSON.parse(t):[]}catch{return[]}},h=t=>{try{localStorage.setItem(k,JSON.stringify(t))}catch{}};function w({onClick:t,children:o,disabled:a,"aria-label":r}){return e.jsx("button",{onClick:t,"aria-label":r,disabled:a,className:"h-9 w-9 rounded-lg border border-slate-200 bg-white text-slate-700 hover:bg-slate-50 active:scale-[0.98] disabled:opacity-40",type:"button",children:o})}function M({item:t,onInc:o,onDec:a,onRemove:r}){const x=t.price*t.qty;return e.jsxs("div",{className:"grid grid-cols-[72px_1fr_auto] sm:grid-cols-[90px_1fr_auto_auto] gap-3 sm:gap-4 items-center border-b border-slate-100 py-4",children:[e.jsx("div",{className:"h-18 w-18 sm:h-20 sm:w-20 overflow-hidden rounded-md bg-slate-100",children:e.jsx("img",{src:t.img,alt:t.name,className:"h-full w-full object-cover object-center",loading:"lazy"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm sm:text-base font-semibold text-slate-900 line-clamp-2",children:t.name}),t.variant?e.jsx("div",{className:"text-xs text-slate-500",children:t.variant}):null,e.jsx("div",{className:"mt-1 text-sm text-slate-700 sm:hidden",children:n(t.price)})]}),e.jsx("div",{className:"hidden sm:block text-sm font-medium text-slate-700",children:n(t.price)}),e.jsxs("div",{className:"col-span-3 sm:col-span-1 flex items-center justify-between sm:justify-end gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{onClick:a,"aria-label":"Decrease quantity",disabled:t.qty<=1,children:"−"}),e.jsx("input",{readOnly:!0,value:t.qty,className:"h-9 w-14 rounded-lg border border-slate-200 bg-white text-center text-sm"}),e.jsx(w,{onClick:o,"aria-label":"Increase quantity",children:"＋"})]}),e.jsx("div",{className:"min-w-[96px] text-right font-semibold text-slate-900",children:n(x)}),e.jsx("button",{onClick:r,className:"text-xs text-rose-600 hover:text-rose-700",type:"button",children:"Remove"})]})]})}function O({items:t=null,shipping:o=49}){const[a,r]=c.useState(t||[]);c.useEffect(()=>{if(t)h(t);else{const s=R();s.length&&r(s)}},[]),c.useEffect(()=>{h(a)},[a]);const[x,p]=c.useState(""),[d,b]=c.useState(null),[m,f]=c.useState(!1),u=c.useMemo(()=>a.reduce((s,i)=>s+Number(i.price)*Number(i.qty),0),[a]),g=c.useMemo(()=>d&&d==="FLAT10"?Math.round(u*.1):0,[d,u]),j=Math.max(0,u-g),y=Math.round(j*.05),N=j+y+(a.length?Number(o):0),C=s=>r(i=>i.map(l=>l.id===s?{...l,qty:l.qty+1}:l)),S=s=>r(i=>i.map(l=>l.id===s&&l.qty>1?{...l,qty:l.qty-1}:l)),q=s=>r(i=>i.filter(l=>l.id!==s)),I=s=>{s.preventDefault(),b(x.trim().toUpperCase())},_=()=>{r([]),h([]),b(null),p("")},v=s=>{s.preventDefault(),!(!a.length||m)&&A.post("/checkout",{items:a,coupon:d,shipping:o},{onStart:()=>f(!0),onFinish:()=>f(!1),onSuccess:()=>{_()}})};return e.jsxs(T,{children:[e.jsx(P,{title:"Your Cart"}),e.jsxs("div",{className:"bg-slate-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-cyan-600 via-sky-600 to-blue-600",children:e.jsxs("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 py-4 sm:py-6 flex items-center gap-3",children:[e.jsx("img",{src:"/image/11111.png",alt:"CellVeda",className:"h-8 w-auto sm:h-10 shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-lg sm:text-3xl font-bold text-white",children:"Your Shopping Cart"}),e.jsx("p",{className:"text-white/90 text-xs sm:text-sm truncate",children:"Review your items and proceed to checkout."})]})]})}),e.jsxs("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 py-6 sm:py-8 grid gap-6 lg:grid-cols-[1.2fr_.8fr]",children:[e.jsx("section",{className:"rounded-2xl bg-white p-4 sm:p-6 shadow ring-1 ring-slate-100",children:a.length===0?e.jsxs("div",{className:"py-14 sm:py-16 text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl font-semibold text-slate-900",children:"Your cart is empty"}),e.jsx("p",{className:"mt-1 text-slate-600",children:"Add products to continue shopping."}),e.jsx("a",{href:"/",className:"mt-4 inline-flex w-full sm:w-auto justify-center rounded-lg bg-sky-600 px-4 py-2.5 text-white font-semibold hover:bg-sky-700",children:"Browse Products"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden sm:grid grid-cols-[90px_1fr_auto_auto] gap-4 border-b border-slate-200 pb-3 text-xs font-semibold text-slate-500 uppercase tracking-wide",children:[e.jsx("div",{children:"Item"}),e.jsx("div",{children:"Product"}),e.jsx("div",{children:"Price"}),e.jsx("div",{className:"text-right",children:"Total"})]}),e.jsx("div",{className:"divide-y divide-slate-100",children:a.map(s=>e.jsx(M,{item:s,onInc:()=>C(s.id),onDec:()=>S(s.id),onRemove:()=>q(s.id)},s.id))}),e.jsxs("form",{onSubmit:I,className:"mt-4 flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsx("input",{value:x,onChange:s=>p(s.target.value),placeholder:"Have a coupon? e.g., FLAT10",className:"w-full sm:max-w-xs rounded-lg border border-slate-200 px-3 py-2.5 text-sm",inputMode:"text",autoComplete:"off"}),e.jsx("button",{type:"submit",className:"rounded-lg bg-sky-600 px-4 py-2.5 text-white text-sm font-semibold hover:bg-sky-700",children:"Apply"}),d&&e.jsxs("span",{className:"text-xs font-medium text-emerald-700",children:["Applied: ",d]})]})]})}),e.jsxs("aside",{className:"h-max rounded-2xl bg-white p-4 sm:p-6 shadow ring-1 ring-slate-100 lg:sticky lg:top-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Order Summary"}),e.jsxs("div",{className:"mt-3 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Subtotal"}),e.jsx("span",{className:"font-medium text-slate-900",children:n(u)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Discount"}),e.jsxs("span",{className:"font-medium text-emerald-700",children:["− ",n(g)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Tax (5%)"}),e.jsx("span",{className:"font-medium text-slate-900",children:n(y)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Shipping"}),e.jsx("span",{className:"font-medium text-slate-900",children:a.length?n(o):n(0)})]}),e.jsx("div",{className:"my-2 border-t border-slate-200"}),e.jsxs("div",{className:"flex items-center justify-between text-base font-bold text-slate-900",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:n(N)})]})]}),e.jsxs("div",{className:"mt-5 grid gap-3",children:[e.jsx("button",{onClick:v,disabled:m||a.length===0,className:"inline-flex items-center justify-center rounded-lg bg-gradient-to-r from-cyan-600 via-sky-600 to-blue-600 px-5 py-2.5 text-white font-semibold hover:from-cyan-700 hover:to-blue-700 w-full disabled:opacity-60",type:"button",children:m?"Processing...":"Proceed to Checkout"}),e.jsx("a",{href:"/",className:"inline-flex items-center justify-center rounded-lg border border-slate-200 px-5 py-2.5 text-slate-700 font-semibold hover:bg-slate-50 w-full",children:"Continue Shopping"})]}),e.jsx("div",{className:"mt-6 text-[11px] text-slate-500",children:"Payments supported: UPI, Cards, NetBanking. Secure checkout."})]})]}),a.length>0&&e.jsx("div",{className:"lg:hidden sticky bottom-0 inset-x-0 border-t border-slate-200 bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60",children:e.jsxs("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 py-3 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-slate-600",children:"Total"}),e.jsx("div",{className:"font-semibold text-slate-900",children:n(N)})]}),e.jsx("button",{onClick:v,disabled:m||a.length===0,className:"inline-flex flex-1 justify-center rounded-lg bg-sky-600 px-4 py-2.5 text-white font-semibold hover:bg-sky-700 disabled:opacity-60",type:"button",children:m?"Processing...":"Checkout"})]})})]})]})}export{O as default};
