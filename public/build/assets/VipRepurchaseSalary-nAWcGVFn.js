import{b as R,R as k,j as e,H as M,a as V}from"./app-DY0TNshk.js";import{A as C}from"./AuthenticatedLayout-L6BZQBhv.js";const t=c=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(Number(c||0)),F=c=>{const s=Number(c||0);return s>=1e7?`${(s/1e7).toFixed(2)} Cr`:s>=1e5?`${(s/1e5).toFixed(2)} Lac`:s>=1e3?`${(s/1e3).toFixed(2)} K`:`${s}`};function L(){const s=R().props||{},d=s.slabs??[{rank:"VIP 1",volume:3e4,salary:1e3},{rank:"VIP 2",volume:1e5,salary:3e3},{rank:"VIP 3",volume:2e5,salary:5e3},{rank:"VIP 4",volume:5e5,salary:1e4},{rank:"VIP 5",volume:1e6,salary:25e3},{rank:"VIP 6",volume:2e6,salary:5e4},{rank:"VIP 7",volume:5e6,salary:1e5}],N=s.month??new Date().toISOString().slice(0,7),[v,f]=k.useState(N),w=a=>{const n=a.target.value;f(n),V.visit(`/income/vip-repurchase-salary?month=${encodeURIComponent(n)}`,{preserveScroll:!0,preserveState:!0})},p=s.placement_combined??{left:s.left??0,right:s.right??0},u=s.placement_sells??{left:0,right:0},g=s.placement_repurchases??{left:0,right:0},m=Number(p.left||0),x=Number(p.right||0),l=Math.min(m,x),P=Math.abs(m-x),y=d.map(a=>Number(a.volume||0)),S=a=>a===0?0:y[a-1],I=y.filter(a=>l>=a).length-1,o=d[I+1]||null;return s.achieved_rank,e.jsxs(C,{header:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-semibold text-gray-900",children:"VIP Repurchase Salary"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Matching volumes decide your VIP rank & 3-month salary. (Showing Placement combined)"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"month",value:v,onChange:w,className:"w-[160px] rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm"})})]}),children:[e.jsx(M,{title:"VIP Repurchase Salary"}),e.jsxs("div",{className:"mx-auto max-w-6xl px-3 sm:px-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"rounded-xl border bg-white p-4 shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Placement Combined Left"}),e.jsx("div",{className:"mt-2 text-xl font-bold",children:t(m)}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Sell: ",t(u.left)," • Repurchase: ",t(g.left)]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Carry Forward: ",t(s?.carry_forward?.left??0)]})]}),e.jsxs("div",{className:"rounded-xl border bg-white p-4 shadow-sm",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Placement Combined Right"}),e.jsx("div",{className:"mt-2 text-xl font-bold",children:t(x)}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Sell: ",t(u.right)," • Repurchase: ",t(g.right)]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Carry Forward: ",t(s?.carry_forward?.right??0)]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"rounded-lg border bg-white p-3 shadow-sm text-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{className:"text-gray-700",children:[e.jsx("strong",{children:"Placement Matched:"})," ",t(l),"  •  ",e.jsxs("span",{className:"text-gray-500",children:["Pending: ",t(P)]})]}),e.jsx("div",{className:"text-sm text-gray-600",children:o?e.jsxs("span",{className:"ml-4 text-amber-600",children:["Next slab (",o.rank,") needs: ",t(Math.max(0,Number(o.volume)-l))]}):e.jsx("span",{className:"ml-4 text-emerald-600",children:"Max slab reached"})})]})})}),e.jsxs("div",{className:"mt-2 overflow-hidden rounded-2xl border border-gray-200 bg-white shadow",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-violet-600 h-12 flex items-center px-4",children:e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Salary Slabs (3 Months)"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 text-left text-gray-700 uppercase text-xs tracking-wider",children:[e.jsx("th",{className:"px-4 py-3 w-40",children:"Rank"}),e.jsx("th",{className:"px-4 py-3",children:"Monthly Matching Volume"}),e.jsx("th",{className:"px-4 py-3",children:"Salary"}),e.jsx("th",{className:"px-4 py-3 w-36 text-center",children:"Progress / Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:d.map((a,n)=>{const i=Number(a.volume||0),h=S(n);let r=0;l>=i?r=100:l<=h?r=0:r=Math.round((l-h)/(i-h)*100);const b=r===100,j=r>0&&r<100;return e.jsxs("tr",{className:`${b?"bg-emerald-50":j?"bg-amber-50":""}`,children:[e.jsx("td",{className:"px-4 py-3 font-semibold",children:a.rank}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono",children:t(i)}),e.jsxs("span",{className:"text-gray-400 text-xs",children:["(",F(i),")"]})]})}),e.jsx("td",{className:"px-4 py-3 font-semibold",children:t(a.salary)}),e.jsx("td",{className:"px-4 py-3 text-center",children:b?e.jsx("span",{className:"inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs font-semibold bg-emerald-100 text-emerald-700",children:"Achieved"}):j?e.jsxs("div",{className:"text-amber-600 font-medium",children:[r,"%"]}):e.jsx("span",{className:"inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs font-semibold bg-gray-100 text-gray-600",children:"Pending"})})]},n)})})]})})]}),e.jsxs("div",{className:"mt-4 mb-8 rounded-xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-800",children:[e.jsxs("div",{children:[e.jsx("b",{children:"Note:"})," Placement combined = Sell + Repurchase (placement tree). Matching = ",e.jsx("i",{children:"min(Left, Right)"}),". Pending = |Left − Right|."]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("b",{children:"Carry Forward:"})," unmatched volume from previous month forwarded automatically."]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("b",{children:"Weekly closing:"})," Salary week is Monday → Sunday — closing command generates weekly installments on next Monday (server-side)."]})]})]})]})}export{L as default};
