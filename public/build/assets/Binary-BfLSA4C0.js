import{b as w,R as y,j as e,L as k}from"./app-DkBMTh0W.js";import{A as R}from"./AuthenticatedLayout-BPA4Mh3V.js";const l=a=>Number(a||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),h=["silver","gold","diamond"],b={silver:"bg-gray-100 text-gray-700 ring-gray-200",gold:"bg-amber-100 text-amber-800 ring-amber-200",diamond:"bg-emerald-100 text-emerald-800 ring-emerald-200",other:"bg-slate-100 text-slate-700 ring-slate-200"};function g({rank:a}){const r=b[a]||b.other;return e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1 capitalize ${r}`,children:a})}function u({label:a,value:r,tone:c="slate"}){const d={left:{ring:"ring-emerald-200",border:"border-emerald-200",bg:"bg-gradient-to-br from-emerald-50 to-white",text:"text-emerald-700",chip:"bg-emerald-100 text-emerald-700 ring-emerald-200"},right:{ring:"ring-sky-200",border:"border-sky-200",bg:"bg-gradient-to-br from-sky-50 to-white",text:"text-sky-700",chip:"bg-sky-100 text-sky-700 ring-sky-200"},slate:{ring:"ring-gray-200",border:"border-gray-200",bg:"bg-white",text:"text-gray-900",chip:"bg-gray-100 text-gray-700 ring-gray-200"}}[c]||d?.slate;return e.jsxs("div",{className:`rounded-2xl ${d.bg} border ${d.border} p-5 shadow-sm ring-1 ${d.ring}`,children:[e.jsxs("div",{className:"text-[11px] uppercase tracking-wide text-gray-500",children:[" ",a," "]}),e.jsxs("div",{className:`mt-1 text-2xl font-semibold tabular-nums ${d.text}`,children:["₹",l(r)]})]})}function x({value:a,side:r}){const c=r==="L"?"bg-emerald-50 text-emerald-700 ring-emerald-200":r==="R"?"bg-sky-50 text-sky-700 ring-sky-200":"bg-gray-50 text-gray-700 ring-gray-200";return e.jsxs("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-semibold tabular-nums ring-1 ${c}`,children:["₹",l(a)]})}function _(){const{asOf:a,filters:r,totals:c,matrix:d,recent:p}=w().props,[o,j]=y.useState(r?.from||""),[m,f]=y.useState(r?.to||""),N=()=>{const s=new URLSearchParams;o&&s.set("from",o),m&&s.set("to",m);const i=s.toString();return i?`/income/binary?${i}`:"/income/binary"},n=h.reduce((s,i)=>{const t=d?.[i]||{};return s.oL+=t.orders_left||0,s.oR+=t.orders_right||0,s.aL+=t.left||0,s.aR+=t.right||0,s.m+=t.matched||0,s.cfL+=t.cf_left||0,s.cfR+=t.cf_right||0,s},{oL:0,oR:0,aL:0,aR:0,m:0,cfL:0,cfR:0});return e.jsx(R,{header:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-semibold text-gray-900",children:"Binary Business"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Rank-wise left/right business, matched volume & carry forward."})]}),e.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:["As of: ",e.jsx("span",{className:"font-medium",children:a})]})]}),children:e.jsxs("div",{className:"mx-auto max-w-6xl px-3 sm:px-6 py-6 space-y-6",children:[e.jsx("div",{className:"rounded-2xl border border-gray-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"From"}),e.jsx("input",{type:"date",value:o,onChange:s=>j(s.target.value),className:"w-[170px] rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/30"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"To"}),e.jsx("input",{type:"date",value:m,onChange:s=>f(s.target.value),className:"w-[170px] rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/30"})]}),e.jsx("a",{href:N(),className:"inline-flex items-center rounded-lg bg-gray-900 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:opacity-90",children:"Apply"}),e.jsx(k,{href:"/income/binary",className:"inline-flex items-center rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50",children:"Reset"})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsx(u,{label:"Left Business",value:c?.left,tone:"left"}),e.jsx(u,{label:"Right Business",value:c?.right,tone:"right"})]}),e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between border-b px-5 py-4",children:[e.jsx("h2",{className:"font-semibold text-gray-900",children:"Rank-wise Summary"}),e.jsx("div",{className:"hidden sm:flex items-center gap-2 text-xs",children:h.map(s=>e.jsx(g,{rank:s},s))})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"sticky top-0 z-10",children:e.jsxs("tr",{className:"bg-gray-50/80 backdrop-blur text-left text-gray-600",children:[e.jsx("th",{className:"px-5 py-3 w-36",children:"Rank"}),e.jsx("th",{className:"px-5 py-3",children:"Left (Orders • Amount)"}),e.jsx("th",{className:"px-5 py-3",children:"Right (Orders • Amount)"}),e.jsx("th",{className:"px-5 py-3",children:"Matched (Amount)"}),e.jsx("th",{className:"px-5 py-3",children:"Carry Fwd L"}),e.jsx("th",{className:"px-5 py-3",children:"Carry Fwd R"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:h.map((s,i)=>{const t=d?.[s]||{},v=i%2?"bg-gray-50/60":"bg-white";return e.jsxs("tr",{className:`transition-colors hover:bg-gray-50 ${v}`,children:[e.jsx("td",{className:"px-5 py-3 capitalize",children:e.jsx(g,{rank:s})}),e.jsxs("td",{className:"px-5 py-3",children:[e.jsxs("div",{className:"text-emerald-700/80 text-xs",children:["Orders: ",e.jsx("span",{className:"font-medium",children:t.orders_left||0})]}),e.jsx("div",{className:"mt-1",children:e.jsx(x,{side:"L",value:t.left})})]}),e.jsxs("td",{className:"px-5 py-3",children:[e.jsxs("div",{className:"text-sky-700/80 text-xs",children:["Orders: ",e.jsx("span",{className:"font-medium",children:t.orders_right||0})]}),e.jsx("div",{className:"mt-1",children:e.jsx(x,{side:"R",value:t.right})})]}),e.jsxs("td",{className:"px-5 py-3 font-semibold tabular-nums",children:["₹",l(t.matched)]}),e.jsxs("td",{className:"px-5 py-3 tabular-nums",children:["₹",l(t.cf_left)]}),e.jsxs("td",{className:"px-5 py-3 tabular-nums",children:["₹",l(t.cf_right)]})]},s)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"border-t bg-gray-50/80",children:[e.jsx("td",{className:"px-5 py-3 font-semibold",children:"Grand Total"}),e.jsxs("td",{className:"px-5 py-3 font-semibold",children:[e.jsxs("div",{className:"text-emerald-700/80 text-xs",children:["Orders: ",e.jsx("span",{className:"font-medium",children:n.oL})]}),e.jsx("div",{className:"mt-1",children:e.jsx(x,{side:"L",value:n.aL})})]}),e.jsxs("td",{className:"px-5 py-3 font-semibold",children:[e.jsxs("div",{className:"text-sky-700/80 text-xs",children:["Orders: ",e.jsx("span",{className:"font-medium",children:n.oR})]}),e.jsx("div",{className:"mt-1",children:e.jsx(x,{side:"R",value:n.aR})})]}),e.jsxs("td",{className:"px-5 py-3 font-semibold tabular-nums",children:["₹",l(n.m)]}),e.jsxs("td",{className:"px-5 py-3 font-semibold tabular-nums",children:["₹",l(n.cfL)]}),e.jsxs("td",{className:"px-5 py-3 font-semibold tabular-nums",children:["₹",l(n.cfR)]})]})})]})})]}),e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm",children:[e.jsx("div",{className:"px-5 py-4 border-b",children:e.jsx("h2",{className:"font-semibold text-gray-900",children:"Recent Paid Orders (Last 20)"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"sticky top-0 z-10",children:e.jsxs("tr",{className:"bg-gray-50/80 backdrop-blur text-left text-gray-600",children:[e.jsx("th",{className:"px-5 py-3",children:"Date"}),e.jsx("th",{className:"px-5 py-3",children:"Buyer"}),e.jsx("th",{className:"px-5 py-3",children:"Product"}),e.jsx("th",{className:"px-5 py-3",children:"Rank"}),e.jsx("th",{className:"px-5 py-3",children:"Leg"}),e.jsx("th",{className:"px-5 py-3",children:"Amount"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[(p||[]).map((s,i)=>e.jsxs("tr",{className:"transition-colors hover:bg-gray-50",children:[e.jsx("td",{className:"px-5 py-3 text-gray-700",children:s.created_at}),e.jsxs("td",{className:"px-5 py-3 text-gray-800",children:["#",s.buyer_id]}),e.jsx("td",{className:"px-5 py-3",children:s.product}),e.jsx("td",{className:"px-5 py-3 capitalize",children:e.jsx(g,{rank:String(s.type||"other").toLowerCase()})}),e.jsx("td",{className:"px-5 py-3 font-semibold",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-0.5 text-xs font-semibold ring-1 ${s.leg==="L"?"bg-emerald-50 text-emerald-700 ring-emerald-200":s.leg==="R"?"bg-sky-50 text-sky-700 ring-sky-200":"bg-gray-50 text-gray-700 ring-gray-200"}`,children:s.leg})}),e.jsxs("td",{className:"px-5 py-3 font-semibold tabular-nums",children:["₹",l(s.amount)]})]},i)),!p?.length&&e.jsx("tr",{children:e.jsx("td",{className:"px-5 py-10 text-center text-gray-500",colSpan:6,children:"No data found."})})]})]})})]})]})})}export{_ as default};
