import{R as L,j as e,H as T,a as I}from"./app-Cg5r-B4-.js";import{A}from"./AuthenticatedLayout-Cq1ilj3p.js";const t=a=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(Number(a||0)),P=a=>{const l=Number(a||0);return l>=1e7?`${(l/1e7).toFixed(2)} Cr`:l>=1e5?`${(l/1e5).toFixed(2)} Lac`:l>=1e3?`${(l/1e3).toFixed(2)} K`:`${l}`};function B({slabs:a=[],summary:l={left:0,right:0,matched:0,paid_this_month:0,due:null},achieved_rank:x=null,team_sells:g={left:0,right:0,rows:[]},team_repurchases:u={left:0,right:0,rows:[]},team_combined:i={left:0,right:0,matched:0},placement_sells:b={left:0,right:0,cnt_left:0,cnt_right:0},placement_repurchases:y={left:0,right:0,cnt_left:0,cnt_right:0},placement_combined:m={left:0,right:0,matched:0},month:C=""}){const[p,S]=L.useState(C||new Date().toISOString().slice(0,7)),w=Number(l?.matched||0),k=s=>{const d=s.target.value;S(d),I.visit(`/income/vip-repurchase-salary?month=${encodeURIComponent(d)}`,{preserveScroll:!0,preserveState:!0})};function n({title:s,amount:d,subtitle:r}){return e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-500",children:s}),e.jsx("div",{className:"mt-1 text-xl font-semibold text-gray-900",children:t(d)}),r&&e.jsx("div",{className:"text-xs text-gray-500",children:r})]})}const M=a.map(s=>s.volume).filter(s=>w>=s).length-1,o=a[M+1]||null,R=(a[Math.max(M,0)]||a[0]||{volume:1})?.volume||1,$=o?Math.min(100,Math.round((w-R)/(o.volume-R)*100)):100;return e.jsxs(A,{header:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-semibold text-gray-900",children:"VIP Repurchase Salary"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Monthly matching volumes decide your VIP rank & 3-month salary. (sell + repurchase combined)"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"month",value:p,onChange:k,className:"w-[160px] rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/30"})})]}),children:[e.jsx(T,{title:"VIP Repurchase Salary"}),e.jsxs("div",{className:"mx-auto max-w-6xl px-3 sm:px-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-indigo-600 via-violet-600 to-fuchsia-600 p-4 sm:p-6 text-white shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs/6 opacity-95",children:"Selected Month"}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold tracking-tight",children:p})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 xs:grid-cols-2 lg:grid-cols-4 min-w-[220px]",children:[e.jsx(f,{label:"Team Left (sell+repurchase)",value:t(i.left||0)}),e.jsx(f,{label:"Team Right (sell+repurchase)",value:t(i.right||0)}),e.jsx(f,{label:"Matched (combined)",value:t(i.matched||0)}),e.jsx(f,{label:"Paid This Month",value:t(l?.paid_this_month||0)})]})]}),e.jsxs("div",{className:"mt-5 rounded-xl bg-white/10 p-3 sm:p-4 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between text-[11px] sm:text-xs",children:[e.jsx("div",{className:"font-medium",children:x?`Current Rank: ${x}`:"Current Rank: â€”"}),e.jsx("div",{className:"opacity-90",children:o?`Next: ${o.rank} at ${t(o.volume)}`:"Max rank achieved"})]}),e.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full bg-white/20",children:e.jsx("div",{className:"h-full rounded-full bg-white shadow-[0_0_10px_rgba(255,255,255,0.4)]",style:{width:`${$}%`},title:`${$}%`})})]}),e.jsx("div",{className:"mt-3",children:x?e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-500/20 px-3 py-1.5 text-[13px] font-medium ring-1 ring-emerald-400/40",children:[e.jsx("span",{children:"ðŸŽ‰"}),e.jsxs("span",{children:["Congrats! You achieved ",e.jsx("b",{children:x})," in ",e.jsx("b",{children:p}),"."]})]}):e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-3 py-1.5 text-[13px] font-medium ring-1 ring-white/30",children:[e.jsx("span",{children:"ðŸ“ˆ"}),e.jsx("span",{children:"Keep pushing to unlock the next VIP rank."})]})})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(n,{title:"Team Left (sell)",amount:g.left,subtitle:"Placement: left"}),e.jsx(n,{title:"Team Right (sell)",amount:g.right,subtitle:"Placement: right"}),e.jsx(n,{title:"Team Left (repurchase)",amount:u.left,subtitle:"Placement: left"}),e.jsx(n,{title:"Team Right (repurchase)",amount:u.right,subtitle:"Placement: right"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsx(n,{title:"Team Combined Left (sell+repurchase)",amount:i.left}),e.jsx(n,{title:"Team Combined Right (sell+repurchase)",amount:i.right}),e.jsx(n,{title:"Team Combined Matched",amount:i.matched})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsx(n,{title:"Placement Combined Left",amount:m.left}),e.jsx(n,{title:"Placement Combined Right",amount:m.right})]}),e.jsxs("div",{className:"mt-6 overflow-hidden rounded-2xl border border-gray-200 bg-white shadow",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-violet-600 h-12 flex items-center px-4",children:e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Salary Slabs (3 Months)"})}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 text-left text-gray-700 uppercase text-xs tracking-wider",children:[e.jsx(j,{className:"w-36 rounded-tl-2xl",children:"Rank"}),e.jsx(j,{children:"Monthly Matching Volume"}),e.jsx(j,{children:"Salary"}),e.jsx(j,{className:"w-56 text-center rounded-tr-2xl",children:"Progress / Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:a.map((s,d)=>{const r=(i.matched||0)>=s.volume,h=Math.min(100,Math.round((i.matched||0)/s.volume*100)),c=isFinite(h)?h:0,N=Math.min(i.matched||0,s.volume);return e.jsxs("tr",{className:`transition-colors duration-200 ${r?"bg-emerald-50 hover:bg-emerald-100":d%2?"bg-gray-50 hover:bg-gray-100":"hover:bg-gray-50"}`,children:[e.jsx(v,{className:"font-semibold px-4 py-3",children:s.rank}),e.jsx(v,{className:"whitespace-nowrap px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono",children:t(s.volume)}),e.jsxs("span",{className:"text-gray-400 text-xs",children:["(",P(s.volume),")"]})]})}),e.jsx(v,{className:"whitespace-nowrap font-semibold px-4 py-3",children:e.jsx("span",{className:"font-mono",children:t(s.salary)})}),e.jsxs(v,{className:"px-4 py-3",children:[e.jsxs("div",{className:"mb-2 text-[13px] flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-medium",children:r?e.jsx("span",{className:"inline-flex items-center gap-2 text-emerald-700",children:e.jsx("strong",{children:"Achieved"})}):e.jsxs("span",{className:"text-gray-700 font-medium",children:[t(N)," / ",t(s.volume)]})}),e.jsxs("div",{className:"text-xs text-gray-500",children:[c,"%"]})]}),e.jsx("div",{className:"h-3 w-full rounded-full bg-gray-100 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${r?"bg-emerald-500":"bg-amber-400"}`,style:{width:`${c}%`},title:`${c}% full`})})]})]},d)})})]})}),e.jsx("div",{className:"md:hidden divide-y",children:a.map((s,d)=>{const r=(i.matched||0)>=s.volume,h=Math.min(100,Math.round((i.matched||0)/s.volume*100)),c=isFinite(h)?h:0,N=Math.min(i.matched||0,s.volume);return e.jsxs("div",{className:"p-4 bg-white hover:bg-gray-50 transition-colors duration-150",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold",children:s.rank}),e.jsx("div",{className:"text-xs",children:r?e.jsx("span",{className:"text-emerald-700 font-semibold",children:"Achieved"}):`${c}%`})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{className:"text-gray-500",children:"Monthly Matching"}),e.jsxs("div",{className:"text-right font-medium",children:[e.jsx("span",{className:"font-mono",children:t(s.volume)})," ",e.jsxs("span",{className:"text-gray-400",children:["(",P(s.volume),")"]})]}),e.jsx("div",{className:"text-gray-500",children:"Salary"}),e.jsx("div",{className:"text-right font-semibold",children:e.jsx("span",{className:"font-mono",children:t(s.salary)})}),e.jsx("div",{className:"text-gray-500",children:"Progress"}),e.jsx("div",{className:"text-right font-medium",children:r?t(s.volume):`${t(N)} / ${t(s.volume)}`})]}),e.jsx("div",{className:"mt-3 h-3 w-full rounded-full bg-gray-100 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${r?"bg-emerald-500":"bg-amber-400"}`,style:{width:`${c}%`},title:`${c}% full`})})]},d)})})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-xl border bg-white p-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Team (referral) Breakdown"}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Sell: Left ",t(g.left)," â€” Right ",t(g.right)]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Repurchase: Left ",t(u.left)," â€” Right ",t(u.right)]}),e.jsxs("div",{className:"text-sm text-gray-800 font-medium",children:["Combined: Left ",t(i.left)," â€” Right ",t(i.right)," â€” Matched ",t(i.matched)]})]}),e.jsxs("div",{className:"rounded-xl border bg-white p-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Placement Breakdown"}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Sell: Left ",t(b.left)," â€” Right ",t(b.right)]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Repurchase: Left ",t(y.left)," â€” Right ",t(y.right)]}),e.jsxs("div",{className:"text-sm text-gray-800 font-medium",children:["Combined: Left ",t(m.left)," â€” Right ",t(m.right)," â€” Matched ",t(m.matched)]})]})]}),e.jsxs("div",{className:"mt-8 mb-12 text-sm text-gray-500",children:[e.jsx("b",{children:"Note:"})," Above totals are computed for the selected month and include both ",e.jsx("i",{children:"sell"})," and ",e.jsx("i",{children:"repurchase"})," transactions (status='paid'). Matched = min(left, right) using combined values."]})]})]})}function f({label:a,value:l}){return e.jsxs("div",{className:"rounded-xl bg-white/10 px-4 py-3 text-white shadow-sm ring-1 ring-white/20",children:[e.jsx("div",{className:"text-[11px] opacity-90",children:a}),e.jsx("div",{className:"truncate text-lg font-semibold",title:l,children:l})]})}function j({children:a,className:l=""}){return e.jsx("th",{className:`px-4 py-3 text-xs font-semibold uppercase tracking-wide ${l}`,children:a})}function v({children:a,className:l=""}){return e.jsx("td",{className:`px-4 py-3 text-gray-800 ${l}`,children:a})}export{B as default};
