import{R as k,j as e,H as $,a as I}from"./app-DtdCyWhf.js";import{A as V}from"./AuthenticatedLayout-Bbvex9KF.js";const l=a=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(Number(a||0)),x=a=>{const s=Number(a||0);return s>=1e7?`${(s/1e7).toFixed(2)} Cr`:s>=1e5?`${(s/1e5).toFixed(2)} Lac`:s>=1e3?`${(s/1e3).toFixed(2)} K`:`${s}`};function _({slabs:a=[{rank:"VIP 1",volume:3e4,salary:1e3},{rank:"VIP 2",volume:1e5,salary:3e3},{rank:"VIP 3",volume:2e5,salary:5e3},{rank:"VIP 4",volume:5e5,salary:1e4},{rank:"VIP 5",volume:1e6,salary:25e3},{rank:"VIP 6",volume:2e6,salary:5e4},{rank:"VIP 7",volume:5e6,salary:1e5}],summary:s={left:0,right:0,matched:0,achieved_rank:null,paid_this_month:0,due:null},month:p=""}){const[j,w]=k.useState(p||new Date().toISOString().slice(0,7)),i=Number(s?.matched||0),M=t=>{const n=t.target.value;w(n),I.visit(`/income/vip-repurchase-salary?month=${encodeURIComponent(n)}`,{preserveScroll:!0,preserveState:!0})},m=s?.achieved_rank??null,N=a.map(t=>t.volume).filter(t=>i>=t).length-1,o=a[N+1]||null,b=(a[Math.max(N,0)]||a[0])?.volume||1,y=o?Math.min(100,Math.round((i-b)/(o.volume-b)*100)):100;return e.jsxs(V,{header:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-semibold text-gray-900",children:"VIP Repurchase Salary"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Monthly matching volumes decide your VIP rank & 3-month salary."})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"month",value:j,onChange:M,className:"w-[160px] rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/30"})})]}),children:[e.jsx($,{title:"VIP Repurchase Salary"}),e.jsxs("div",{className:"mx-auto max-w-6xl px-3 sm:px-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-indigo-600 via-violet-600 to-fuchsia-600 p-4 sm:p-6 text-white shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs/6 opacity-95",children:"Selected Month"}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold tracking-tight",children:j})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 xs:grid-cols-2 lg:grid-cols-4 min-w-[220px]",children:[e.jsx(h,{label:"Left Volume",value:l(s?.left||0)}),e.jsx(h,{label:"Right Volume",value:l(s?.right||0)}),e.jsx(h,{label:"Matched",value:l(i||0)}),e.jsx(h,{label:"Paid This Month",value:l(s?.paid_this_month||0)})]})]}),e.jsxs("div",{className:"mt-5 rounded-xl bg-white/10 p-3 sm:p-4 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between text-[11px] sm:text-xs",children:[e.jsx("div",{className:"font-medium",children:m?`Current Rank: ${m}`:"Current Rank: â€”"}),e.jsx("div",{className:"opacity-90",children:o?`Next: ${o.rank} at ${l(o.volume)}`:"Max rank achieved"})]}),e.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full bg-white/20",children:e.jsx("div",{className:"h-full rounded-full bg-white shadow-[0_0_10px_rgba(255,255,255,0.4)]",style:{width:`${y}%`},title:`${y}%`})})]}),e.jsx("div",{className:"mt-3",children:m?e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-500/20 px-3 py-1.5 text-[13px] font-medium ring-1 ring-emerald-400/40",children:[e.jsx("span",{children:"ðŸŽ‰"}),e.jsxs("span",{children:["Congrats! You achieved ",e.jsx("b",{children:m})," in ",e.jsx("b",{children:j}),"."]})]}):e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-3 py-1.5 text-[13px] font-medium ring-1 ring-white/30",children:[e.jsx("span",{children:"ðŸ“ˆ"}),e.jsx("span",{children:"Keep pushing to unlock the next VIP rank."})]})}),e.jsx("div",{className:"pointer-events-none absolute -right-16 -top-16 h-48 w-48 rounded-full bg-white/20 blur-2xl"})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(u,{title:"Left Volume (Monthly)",main:l(s?.left||0),sub:`(${x(s?.left||0)})`}),e.jsx(u,{title:"Right Volume (Monthly)",main:l(s?.right||0),sub:`(${x(s?.right||0)})`}),e.jsx(u,{title:"Matched Volume (Monthly)",main:l(i||0),sub:"min(Left, Right)"}),e.jsx(u,{title:"Paid This Month",main:l(s?.paid_this_month||0),sub:s?.due&&!s?.due?.paid_at?`Due: ${l(s?.due?.amount)} (installment)`:"â€”"})]}),e.jsxs("div",{className:"mt-6 overflow-hidden rounded-2xl border border-gray-200 bg-white shadow",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-violet-600 h-12 flex items-center px-4",children:e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Salary Slabs (3 Months)"})}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 text-left text-gray-700 uppercase text-xs tracking-wider",children:[e.jsx(g,{className:"w-36 rounded-tl-2xl",children:"Rank"}),e.jsx(g,{children:"Monthly Matching Volume"}),e.jsx(g,{children:"Salary"}),e.jsx(g,{className:"w-56 text-center rounded-tr-2xl",children:"Progress / Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:a.map((t,n)=>{const r=i>=t.volume,c=Math.min(100,Math.round(i/t.volume*100)),d=isFinite(c)?c:0,f=Math.min(i,t.volume);return e.jsxs("tr",{className:`transition-colors duration-200 ${r?"bg-emerald-50 hover:bg-emerald-100":n%2?"bg-gray-50 hover:bg-gray-100":"hover:bg-gray-50"}`,children:[e.jsx(v,{className:"font-semibold px-4 py-3",children:t.rank}),e.jsx(v,{className:"whitespace-nowrap px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono",children:l(t.volume)}),e.jsxs("span",{className:"text-gray-400 text-xs",children:["(",x(t.volume),")"]})]})}),e.jsx(v,{className:"whitespace-nowrap font-semibold px-4 py-3",children:e.jsx("span",{className:"font-mono",children:l(t.salary)})}),e.jsxs(v,{className:"px-4 py-3",children:[e.jsxs("div",{className:"mb-2 text-[13px] flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-medium",children:r?e.jsx("span",{className:"inline-flex items-center gap-2 text-emerald-700",children:e.jsx("strong",{children:"Achieved"})}):e.jsxs("span",{className:"text-gray-700 font-medium",children:[l(f)," / ",l(t.volume)]})}),e.jsxs("div",{className:"text-xs text-gray-500",children:[d,"%"]})]}),e.jsx("div",{className:"h-3 w-full rounded-full bg-gray-100 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${r?"bg-emerald-500":"bg-amber-400"}`,style:{width:`${d}%`},title:`${d}% full`})})]})]},n)})})]})}),e.jsx("div",{className:"md:hidden divide-y",children:a.map((t,n)=>{const r=i>=t.volume,c=Math.min(100,Math.round(i/t.volume*100)),d=isFinite(c)?c:0,f=Math.min(i,t.volume);return e.jsxs("div",{className:"p-4 bg-white hover:bg-gray-50 transition-colors duration-150",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold",children:t.rank}),e.jsx("div",{className:"text-xs",children:r?e.jsx("span",{className:"text-emerald-700 font-semibold",children:"Achieved"}):`${d}%`})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{className:"text-gray-500",children:"Monthly Matching"}),e.jsxs("div",{className:"text-right font-medium",children:[e.jsx("span",{className:"font-mono",children:l(t.volume)})," ",e.jsxs("span",{className:"text-gray-400",children:["(",x(t.volume),")"]})]}),e.jsx("div",{className:"text-gray-500",children:"Salary"}),e.jsx("div",{className:"text-right font-semibold",children:e.jsx("span",{className:"font-mono",children:l(t.salary)})}),e.jsx("div",{className:"text-gray-500",children:"Progress"}),e.jsx("div",{className:"text-right font-medium",children:r?l(t.volume):`${l(f)} / ${l(t.volume)}`})]}),e.jsx("div",{className:"mt-3 h-3 w-full rounded-full bg-gray-100 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${r?"bg-emerald-500":"bg-amber-400"}`,style:{width:`${d}%`},title:`${d}% full`})})]},n)})})]}),e.jsxs("div",{className:"mt-4 mb-8 rounded-xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-800",children:[e.jsx("b",{children:"Note:"})," VIP salary is paid for 3 months once a slab is achieved. Matching volume is calculated as ",e.jsx("i",{children:"min(Left, Right)"})," for the selected month. Closing a week (Monâ†’Sun) will finalize qualification for that week and create 3 weekly installments due on the next three Mondays."]})]})]})}function h({label:a,value:s}){return e.jsxs("div",{className:"rounded-xl bg-white/10 px-4 py-3 text-white shadow-sm ring-1 ring-white/20",children:[e.jsx("div",{className:"text-[11px] opacity-90",children:a}),e.jsx("div",{className:"truncate text-lg font-semibold",title:s,children:s})]})}function u({title:a,main:s,sub:p}){return e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm",children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-500",children:a}),e.jsx("div",{className:"mt-1 text-xl font-semibold text-gray-900",children:s}),e.jsx("div",{className:"text-xs text-gray-500",children:p})]})}function g({children:a,className:s=""}){return e.jsx("th",{className:`px-4 py-3 text-xs font-semibold uppercase tracking-wide ${s}`,children:a})}function v({children:a,className:s=""}){return e.jsx("td",{className:`px-4 py-3 text-gray-800 ${s}`,children:a})}export{_ as default};
