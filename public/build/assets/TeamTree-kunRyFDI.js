import{b as y,r as k,j as e,L as g,H as T}from"./app-CzvGmPUr.js";import{A as L}from"./AuthenticatedLayout-CFvLRIB0.js";const m={diamond:{frame:"bg-emerald-500 border-emerald-600 text-white",badge:"bg-emerald-600 text-white",icon:"bg-emerald-400 text-white",stroke:"#34d399"},gold:{frame:"bg-amber-400 border-amber-500 text-white",badge:"bg-amber-500 text-white",icon:"bg-amber-300 text-white",stroke:"#fbbf24"},silver:{frame:"bg-gray-400 border-gray-500 text-white",badge:"bg-gray-500 text-white",icon:"bg-gray-300 text-white",stroke:"#94a3b8"},starter:{frame:"bg-red-500 border-red-600 text-white",badge:"bg-red-600 text-white",icon:"bg-red-400 text-white",stroke:"#ef4444"},default:{frame:"bg-white border-gray-300 text-gray-700",badge:"bg-gray-100 text-gray-600",icon:"bg-gray-200 text-gray-600",stroke:"#d1d5db"}},$=({color:t="#d1d5db",h:r=16})=>e.jsx("svg",{width:"8",height:r,className:"block",children:e.jsx("line",{x1:"4",y1:"0",x2:"4",y2:r,stroke:t,strokeWidth:"3",strokeLinecap:"round"})}),j=({color:t="#d1d5db",w:r=60})=>e.jsx("svg",{width:r,height:"8",className:"block",children:e.jsx("line",{x1:"0",y1:"4",x2:r,y2:"4",stroke:t,strokeWidth:"3",strokeLinecap:"round"})}),w=t=>t===null||typeof t>"u"?"":String(t);function C({title:t,id:r,pkgNormalized:s,pkgDisplay:a,open:l,onToggle:h,href:d,isRoot:x}){const i=m[s]||m.default;return e.jsxs("div",{className:"relative w-[100px] sm:w-[112px]",children:[e.jsxs("button",{type:"button",onClick:x?void 0:h,className:`mx-auto rounded-xl sm:rounded-2xl border ${i.frame} shadow-md w-[100px] sm:w-[112px] h-[56px] sm:h-[64px] flex items-center justify-center transition active:scale-[0.99] ring-1`,title:l?"Collapse":"Expand",children:[!x&&e.jsx("div",{className:"absolute left-1 top-1 text-[10px] text-white/80",children:l?"â–¾":"â–¸"}),e.jsx("div",{className:`w-6 h-6 sm:w-7 sm:h-7 rounded-full flex items-center justify-center ${i.icon}`,children:e.jsx("span",{className:"text-xs sm:text-sm",children:"ðŸ‘¤"})}),e.jsx("div",{className:`absolute top-1 right-1 text-[8px] px-1.5 rounded-full truncate max-w-[70px] ${i.badge}`,title:w(a),children:w(a)||"No-Pack"})]}),e.jsxs("div",{className:"w-full text-center mt-1",children:[e.jsx("div",{className:"text-[9px] truncate",children:t}),e.jsxs("div",{className:"text-[8px] text-gray-500",children:["#",r]})]}),d&&e.jsx(g,{href:d,className:"absolute -right-1 -bottom-1 text-[9px] bg-white/70 px-1 rounded hover:bg-white",children:"â†—"})]})}function u({node:t,isRoot:r=!1}){const{props:s}=y(),a=s?.type||"placement",[l,h]=k.useState(r);if(!t)return null;const d=t.name||t.code||`#${t.id}`,x=c=>{try{return route("team.tree",{root:c,type:a})}catch{return`/team/tree/${c}?type=${a}`}},i=t.package??t.pkg??null,N=i,f=typeof i=="string"?i.toLowerCase().trim():null,b=l&&(t.children?.L||t.children?.R),p=m[f]||m.default,v=r?"flex flex-col items-center mx-auto":"inline-flex flex-col items-center";return e.jsxs("div",{className:v,children:[e.jsx(C,{title:d,id:t.id,pkgNormalized:f,pkgDisplay:N,open:l,onToggle:()=>h(c=>!c),href:x(t.id),isRoot:r}),b&&e.jsx($,{color:p.stroke,h:14}),b&&e.jsxs("div",{className:"flex items-start gap-4 sm:gap-7",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(j,{color:p.stroke}),t.children?.L?e.jsx(u,{node:t.children.L}):e.jsx("div",{className:"rounded-xl border border-purple-300 bg-purple-50 w-[100px] h-[56px] flex items-center justify-center",children:e.jsx("div",{className:"text-[10px] text-purple-600",children:"ðŸ‘¥âž•"})})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(j,{color:p.stroke}),t.children?.R?e.jsx(u,{node:t.children.R}):e.jsx("div",{className:"rounded-xl border border-purple-300 bg-purple-50 w-[100px] h-[56px] flex items-center justify-center",children:e.jsx("div",{className:"text-[10px] text-purple-600",children:"ðŸ‘¥âž•"})})]})]})]})}const n=({children:t,tone:r="slate"})=>{const s={slate:"bg-slate-100 text-slate-700",yellow:"bg-amber-100 text-amber-800",purple:"bg-emerald-100 text-emerald-800",emerald:"bg-sky-100 text-sky-800",red:"bg-red-100 text-red-800"};return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs ${s[r]}`,children:t})},o=t=>{switch((t||"").toLowerCase().trim()){case"starter":return"red";case"silver":return"slate";case"gold":return"yellow";case"diamond":return"purple";default:return"slate"}},P=({seedId:t,currentType:r})=>{const s=a=>{try{return route("team.tree",{root:t,type:a})}catch{return`/team/tree/${t}?type=${a}`}};return e.jsxs("div",{className:"inline-flex rounded-2xl border bg-white p-1 shadow-sm",children:[e.jsx(g,{href:s("placement"),className:`px-3 py-1.5 rounded-xl text-sm transition ${r==="placement"?"bg-gray-900 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Placement"}),e.jsx(g,{href:s("referral"),className:`px-3 py-1.5 rounded-xl text-sm transition ${r==="referral"?"bg-gray-900 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Referral"})]})};function S({root:t=null,counts:r={},seed:s,type:a="placement"}){const{auth:l}=y().props??{};return e.jsxs(L,{user:l?.user,header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Team Tree"}),s&&e.jsxs("div",{className:"text-[11px] text-gray-600",children:["Viewing ",e.jsx("span",{className:"font-medium",children:s.name}),e.jsxs("span",{className:"mx-1",children:["(# ",s.id,")"]})," â€¢ ",s.code]})]}),s&&e.jsx(P,{seedId:s.id,currentType:a})]}),children:[e.jsx(T,{title:"Team Tree"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"mx-auto max-w-[1400px] px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-2 text-sm text-gray-700",children:[e.jsxs("div",{className:"mr-2",children:["Total Team:"," ",e.jsx("span",{className:"font-medium",children:r?.total_nodes??0}),e.jsx("span",{className:"mx-2",children:"Â·"}),"Left: ",e.jsx("span",{className:"font-medium",children:r?.left_nodes??0}),e.jsx("span",{className:"mx-2",children:"Â·"}),"Right:"," ",e.jsx("span",{className:"font-medium",children:r?.right_nodes??0})]}),e.jsxs(n,{tone:o("starter"),children:["Starter: ",r?.pkg?.starter??0]}),e.jsxs(n,{tone:o("silver"),children:["Silver: ",r?.pkg?.silver??0]}),e.jsxs(n,{tone:o("gold"),children:["Gold: ",r?.pkg?.gold??0]}),e.jsxs(n,{tone:o("diamond"),children:["Diamond: ",r?.pkg?.diamond??0]}),e.jsxs(n,{tone:"emerald",children:["View: ",a==="placement"?"Placement":"Referral"]})]}),t?e.jsx("div",{className:"overflow-x-auto overflow-y-hidden rounded-3xl border bg-white p-5 sm:p-6 shadow-sm ring-1 ring-gray-100",children:e.jsx("div",{className:"min-w-full grid place-items-center",children:e.jsx("div",{className:"w-fit mx-auto sm:min-w-[820px]",children:e.jsx(u,{node:t,isRoot:!0})})})}):e.jsx("div",{className:"rounded-xl border bg-white p-8 text-center text-gray-500",children:"No team found."})]})})]})}export{S as default};
